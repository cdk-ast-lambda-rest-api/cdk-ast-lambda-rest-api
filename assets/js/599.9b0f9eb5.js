"use strict";(self.webpackChunkcalra_docs=self.webpackChunkcalra_docs||[]).push([[599],{5599:(e,t,n)=>{n.r(t),n.d(t,{calculateResultScores:()=>V,create:()=>_,createIndex:()=>re,getSearchableProperties:()=>U,getSearchablePropertiesWithTypes:()=>X,insert:()=>N,insertDocumentScoreParameters:()=>W,insertTokenScoreParameters:()=>E,load:()=>te,remove:()=>Y,removeDocumentScoreParameters:()=>z,removeTokenScoreParameters:()=>K,save:()=>ne,search:()=>H,searchByWhereClause:()=>J});var r=n(7025),o=n(8227);function s(e){const t=e.r;return e.r=t.l,t.l=e,e.h=Math.max(f(e.l),f(e.r))+1,t.h=Math.max(f(t.l),f(t.r))+1,t}function c(e){const t=e.l;return e.l=t.r,t.r=e,e.h=Math.max(f(e.l),f(e.r))+1,t.h=Math.max(f(t.l),f(t.r))+1,t}function l(e,t,n){const r=[];return function e(s){null!==s&&(t<s.k&&e(s.l),s.k>=t&&s.k<=n&&(0,o.h)(r,s.v),n>s.k&&e(s.r))}(e.root),r}function i(e,t,n=!1){const r=[];if(null===e)return r;const s=[e.root];for(;s.length>0;){const e=s.pop();e&&(n&&e.k>=t&&(0,o.h)(r,e.v),!n&&e.k>t&&(0,o.h)(r,e.v),s.push(e.r),s.push(e.l))}return r}function a(e,t,n=!1){const r=[];if(null===e)return r;const s=[e.root];for(;s.length>0;){const e=s.pop();e&&(n&&e.k<=t&&(0,o.h)(r,e.v),!n&&e.k<t&&(0,o.h)(r,e.v),s.push(e.r),s.push(e.l))}return r}function u(e,t){for(;null!==e;)if(t<e.k)e=e.l;else{if(!(t>e.k))return e;e=e.r}return null}function f(e){return null!==e?e.h:-1}function h(e,t){const n=u(e.root,t);return null===n?null:n.v}function d(e,t){const n=Object.keys(t);if(1!==n.length)throw new Error("Invalid operation");const r=n[0];switch(r){case"eq":{const n=t[r];return e.numberToDocumentId.get(n)??[]}case"in":{const n=t[r],s=[];for(const t of n){const n=e.numberToDocumentId.get(t);null!=n&&(0,o.h)(s,n)}return s}case"nin":{const n=t[r],s=[],c=e.numberToDocumentId.keys();for(const t of c){if(n.includes(t))continue;const r=e.numberToDocumentId.get(t);null!=r&&(0,o.h)(s,r)}return s}}throw new Error("Invalid operation")}function g(e,t){const n=Object.keys(t);if(1!==n.length)throw new Error("Invalid operation");const r=n[0];if("containsAll"===r){const n=t[r].map((t=>e.numberToDocumentId.get(t)??[]));return(0,o.y$)(n)}throw new Error("Invalid operation")}var p=n(8654);class v{constructor(e,t,n){this.k=e,this.s=t,this.e=n}c={};d=[];w="";toJSON(){return{w:this.w,s:this.s,c:this.c,d:this.d,e:this.e}}}function y(e,t){e.w=t.w+e.s}function m(e,t){e.d.push(t)}function b(e,t){const n=e.d.indexOf(t);return-1!==n&&(e.d.splice(n,1),!0)}function k(e,t,n,r,s){if(e.e){const{w:c,d:l}=e;if(r&&c!==n)return{};if(null==(0,o.g5)(t,c))if(s){Math.abs(n.length-c.length)<=s&&(0,p.Gd)(n,c,s).isBounded&&(t[c]=[])}else t[c]=[];if(null!=(0,o.g5)(t,c)&&l.length>0){const e=new Set(t[c]),n=l.length;for(let t=0;t<n;t++)e.add(l[t]);t[c]=Array.from(e)}}for(const o of Object.keys(e.c))k(e.c[o],t,n,r,s);return t}function I(e,t){let n="";const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){if(e[o]!==t[o])return n;n+=e[o]}return n}function w(e=!1,t="",n=""){return new v(n,t,e)}function D(e,t,n){const r=t.length;for(let o=0;o<r;o++){const r=t[o],s=t.substring(o),c=e.c[r];if(!c){const t=w(!0,s,r);return m(t,n),e.c[r]=t,void y(t,e)}{const l=c.s,i=l.length,a=I(l,s),u=a.length;if(l===s)return m(c,n),void(c.e=!0);const f=l[u];if(u<i&&u===s.length){const t=w(!0,s,r);t.c[f]=c;const o=t.c[f];return o.s=l.substring(u),o.k=f,e.c[r]=t,y(t,e),y(o,t),void m(t,n)}if(u<i&&u<s.length){const i=w(!1,a,r);i.c[f]=c,e.c[r]=i;const h=i.c[f];h.s=l.substring(u),h.k=f;const d=s[u],g=w(!0,t.substring(o+u),d);return m(g,n),i.c[d]=g,y(i,e),y(g,i),void y(h,i)}o+=i-1,e=c}}}function x(e,t,n,r,s,c){if(!(r<0))if(e.w.startsWith(t))k(e,c,t,!1,0);else{if(e.e){const{w:n,d:r}=e;if(n&&((0,p.Gd)(t,n,s).isBounded&&(c[n]=[]),null!=(0,o.g5)(c,n)&&r.length>0)){const e=new Set(c[n]),t=r.length;for(let n=0;n<t;n++)e.add(r[n]);c[n]=Array.from(e)}}if(!(n>=t.length)){t[n]in e.c&&x(e.c[t[n]],t,n+1,r,s,c),x(e,t,n+1,r-1,s,c);for(const o in e.c)x(e.c[o],t,n,r-1,s,c);for(const o in e.c)o!==t[n]&&x(e.c[o],t,n+1,r-1,s,c)}}}function A(e,{term:t,exact:n,tolerance:r}){if(r&&!n){const n={};return x(e,t,0,(r=r||0)||0,r,n),n}{const o=t.length;for(let n=0;n<o;n++){const o=t[n];if(!(o in e.c))return{};{const s=e.c[o],c=s.s,l=t.substring(n),i=I(c,l).length;if(i!==c.length&&i!==l.length){if(r)break;return{}}n+=s.s.length-1,e=s}}const s={};return k(e,s,t,n,r),s}}function T(e,t,n,r=!0){if(!t)return!0;const o=t.length;for(let s=0;s<o;s++){const o=t[s];if(!(o in e.c))return!1;{const c=e.c[o];s+=c.s.length-1,e=c,r&&e.w!==t||b(e,n)}}return!0}const P=2,O=6371e3;function S(e,t,n,r=!0,o="asc",s=!1){const c=s?j:F,l=[{node:e,depth:0}],i=[];for(;l.length>0;){const{node:e,depth:o}=l.pop();if(null===e)continue;const s=c(t,e.point);(r?s<=n:s>n)&&i.push({point:e.point,docIDs:e.docIDs??[]}),null!=e.left&&l.push({node:e.left,depth:o+1}),null!=e.right&&l.push({node:e.right,depth:o+1})}return o&&i.sort(((e,n)=>{const r=c(t,e.point),s=c(t,n.point);return"asc"===o.toLowerCase()?r-s:s-r})),i}function M(e,t,n=!0,r=null,o=!1){const s=[{node:e,depth:0}],c=[];for(;s.length>0;){const e=s.pop();if(null==e||null==e.node)continue;const{node:r,depth:o}=e,l=o+1;null!=r.left&&s.push({node:r.left,depth:l}),null!=r.right&&s.push({node:r.right,depth:l});const i=L(t,r.point);i&&n?c.push({point:r.point,docIDs:r.docIDs??[]}):i||n||c.push({point:r.point,docIDs:r.docIDs??[]})}const l=function(e){let t=0,n=0,r=0;const o=e.length;for(let c=0,l=o-1;c<o;l=c++){const o=e[c].lon,s=e[c].lat,i=e[l].lon,a=e[l].lat,u=o*a-i*s;t+=u,n+=(o+i)*u,r+=(s+a)*u}t/=2;const s=6*t;return n/=s,r/=s,{lon:n,lat:r}}(t);if(r){const e=o?j:F;c.sort(((t,n)=>{const o=e(l,t.point),s=e(l,n.point);return"asc"===r.toLowerCase()?o-s:s-o}))}return c}function L(e,t){let n=!1;const r=t.lon,o=t.lat,s=e.length;for(let c=0,l=s-1;c<s;l=c++){const t=e[c].lon,s=e[c].lat,i=e[l].lon,a=e[l].lat;s>o!=a>o&&r<(i-t)*(o-s)/(a-s)+t&&(n=!n)}return n}function F(e,t){const n=Math.PI/180,r=e.lat*n,o=t.lat*n,s=(t.lat-e.lat)*n,c=(t.lon-e.lon)*n,l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(r)*Math.cos(o)*Math.sin(c/2)*Math.sin(c/2),i=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return O*i}function j(e,t){const n=6378137,r=1/298.257223563,o=(1-r)*n,s=Math.PI/180,c=e.lat*s,l=t.lat*s,i=(t.lon-e.lon)*s,a=Math.atan((1-r)*Math.tan(c)),u=Math.atan((1-r)*Math.tan(l)),f=Math.sin(a),h=Math.cos(a),d=Math.sin(u),g=Math.cos(u);let p,v,y,m,b,k,I=i,w=1e3;do{const e=Math.sin(I),t=Math.cos(I);m=Math.sqrt(g*e*(g*e)+(h*d-f*g*t)*(h*d-f*g*t)),b=f*d+h*g*t,k=Math.atan2(m,b),v=h*g*e/m,y=1-v*v;const n=b-2*f*d/y,o=r/16*y*(4+r*(4-3*y));p=I,I=i+(1-o)*r*v*(k+o*m*(n+o*b*(2*n*n-1)))}while(Math.abs(I-p)>1e-12&&--w>0);const D=y*(n*n-o*o)/(o*o),x=D/1024*(256+D*(D*(74-47*D)-128));return o*(1+D/16384*(4096+D*(D*(320-175*D)-768)))*(k-x*m*(b-2*f*d/y+x/4*(b*(2*m*m-1)-x/6*k*(4*m*m-3)*(4*k*k-3))))}var R=n(8475),C=n(6768),q=n(3283),B=n(7348);async function W(e,t,n,r,o){const s=(0,B.Kj)(e.sharedInternalDocumentStore,n);e.avgFieldLength[t]=((e.avgFieldLength[t]??0)*(o-1)+r.length)/o,e.fieldLengths[t][s]=r.length,e.frequencies[t][s]={}}async function E(e,t,n,r,o){let s=0;for(const i of r)i===o&&s++;const c=(0,B.Kj)(e.sharedInternalDocumentStore,n),l=s/r.length;e.frequencies[t][c][o]=l,o in e.tokenOccurrences[t]||(e.tokenOccurrences[t][o]=0),e.tokenOccurrences[t][o]=(e.tokenOccurrences[t][o]??0)+1}async function z(e,t,n,r){const o=(0,B.Kj)(e.sharedInternalDocumentStore,n);e.avgFieldLength[t]=(e.avgFieldLength[t]*r-e.fieldLengths[t][o])/(r-1),e.fieldLengths[t][o]=void 0,e.frequencies[t][o]=void 0}async function K(e,t,n){e.tokenOccurrences[t][n]--}async function V(e,t,n,r,o){const s=Array.from(o),c=t.avgFieldLength[n],l=t.fieldLengths[n],i=t.tokenOccurrences[n],a=t.frequencies[n],u="number"==typeof i[r]?i[r]??0:0,f=[],h=s.length;for(let g=0;g<h;g++){var d;const n=(0,B.Kj)(t.sharedInternalDocumentStore,s[g]),o=(null==a||null===(d=a[n])||void 0===d?void 0:d[r])??0,i=(0,R.B)(o,u,e.docsCount,l[n],c,e.params.relevance);f.push([n,i])}return f}async function _(e,t,n,o,s=""){o||(o={sharedInternalDocumentStore:t,indexes:{},vectorIndexes:{},searchableProperties:[],searchablePropertiesWithTypes:{},frequencies:{},tokenOccurrences:{},avgFieldLength:{},fieldLengths:{}});for(const[i,a]of Object.entries(n)){const n=`${s}${s?".":""}${i}`;if("object"!=typeof a||Array.isArray(a))if((0,q.isVectorType)(a))o.searchableProperties.push(n),o.searchablePropertiesWithTypes[n]=a,o.vectorIndexes[n]={size:(0,q.getVectorSize)(a),vectors:{}};else{const e=/\[/.test(a);switch(a){case"boolean":case"boolean[]":o.indexes[n]={type:"Bool",node:{true:[],false:[]},isArray:e};break;case"number":case"number[]":o.indexes[n]={type:"AVL",node:(c=0,l=[],{root:{k:c,v:l,l:null,r:null,h:0}}),isArray:e};break;case"string":case"string[]":o.indexes[n]={type:"Radix",node:w(),isArray:e},o.avgFieldLength[n]=0,o.frequencies[n]={},o.tokenOccurrences[n]={},o.fieldLengths[n]={};break;case"enum":case"enum[]":o.indexes[n]={type:"Flat",node:{numberToDocumentId:new Map},isArray:e};break;case"geopoint":o.indexes[n]={type:"BKD",node:{root:null},isArray:e};break;default:throw(0,r.$)("INVALID_SCHEMA_TYPE",Array.isArray(a)?"array":a,n)}o.searchableProperties.push(n),o.searchablePropertiesWithTypes[n]=a}else _(e,t,a,o,n)}var c,l;return o}function $(e,t,n,r,o,l,i){return async a=>{const u=(0,B.Kj)(t.sharedInternalDocumentStore,r),{type:h,node:d}=t.indexes[n];switch(h){case"Bool":d[a?"true":"false"].push(u);break;case"AVL":p=a,v=[u],(g=d).root=function e(t,n,r){if(null===t)return{k:n,v:r,l:null,r:null,h:0};if(n<t.k)t.l=e(t.l,n,r);else{if(!(n>t.k)){for(const e of r)t.v.push(e);return t}t.r=e(t.r,n,r)}t.h=1+Math.max(f(t.l),f(t.r));const o=f(t.l)-f(t.r);return o>1&&n<t.l.k?c(t):o<-1&&n>t.r.k?s(t):o>1&&n>t.l.k?(t.l=s(t.l),c(t)):o<-1&&n<t.r.k?(t.r=c(t.r),s(t)):t}(g.root,p,v);break;case"Radix":{const r=await l.tokenize(a,o,n);await e.insertDocumentScoreParameters(t,n,u,r,i);for(const o of r)await e.insertTokenScoreParameters(t,n,u,r,o),D(d,o,u);break}case"Flat":!function(e,t,n){e.numberToDocumentId.has(t)?e.numberToDocumentId.get(t).push(n):e.numberToDocumentId.set(t,[n])}(d,a,u);break;case"BKD":!function(e,t,n){const r={point:t,docIDs:n};if(null==e.root)return void(e.root=r);let o=e.root,s=0;for(;null!==o;){if(o.point.lon===t.lon&&o.point.lat===t.lat){const e=o.docIDs??[];return void(o.docIDs=Array.from(new Set([...e,...n||[]])))}if(0==s%P)if(t.lon<o.point.lon){if(null==o.left)return void(o.left=r);o=o.left}else{if(null==o.right)return void(o.right=r);o=o.right}else if(t.lat<o.point.lat){if(null==o.left)return void(o.left=r);o=o.left}else{if(null==o.right)return void(o.right=r);o=o.right}s++}}(d,a,[u])}var g,p,v}}async function N(e,t,n,r,o,s,c,l,i){if((0,q.isVectorType)(s))return function(e,t,n,r){n instanceof Float32Array||(n=new Float32Array(n));const o=e.vectorIndexes[t].size,s=(0,C.V)(n,o);e.vectorIndexes[t].vectors[r]=[s,n]}(t,n,o,r);const a=$(e,t,n,r,c,l,i);if(!(0,q.isArrayType)(s))return a(o);const u=o,f=u.length;for(let h=0;h<f;h++)await a(u[h])}async function G(e,t,n,r,o,s,c,l,i){const a=(0,B.Kj)(t.sharedInternalDocumentStore,r);if((0,q.isVectorType)(s))return delete t.vectorIndexes[n].vectors[r],!0;const{type:f,node:h}=t.indexes[n];switch(f){case"AVL":return function(e,t,n){const r=u(e.root,n);r&&(1!==r.v.length?r.v.splice(r.v.indexOf(t),1):function(e,t){if(null===e||null===e.root)return;let n=e.root,r=null;for(;null!=n&&n.k!==t;)r=n,n=t<n.k?n.l:n.r;null!==n&&(()=>{if(null===n.l&&null===n.r)null===r?e.root=null:r.l===n?r.l=null:r.r=null;else if(null!=n.l&&null!=n.r){let e=n.r,t=n;for(;null!=e.l;)t=e,e=e.l;n.k=e.k,t===n?t.r=e.r:t.l=e.r}else{const t=null!=n.l?n.l:n.r;null===r?e.root=t:r.l===n?r.l=t:r.r=t}})()}(e,n))}(h,a,o),!0;case"Bool":{const e=h[o?"true":"false"].indexOf(a);return h[o?"true":"false"].splice(e,1),!0}case"Radix":{const s=await l.tokenize(o,c,n);await e.removeDocumentScoreParameters(t,n,r,i);for(const r of s)await e.removeTokenScoreParameters(t,n,r),T(h,r,a);return!0}case"Flat":return function(e,t,n){var r,o;null==e||e.numberToDocumentId.set(n,(null===(r=null==e?void 0:e.numberToDocumentId.get(n))||void 0===r?void 0:r.filter((e=>e!==t)))??[]),0===(null===(o=null==e?void 0:e.numberToDocumentId.get(n))||void 0===o?void 0:o.length)&&(null==e||e.numberToDocumentId.delete(n))}(h,a,o),!0;case"BKD":return function(e,t,n){let r=e.root,o=0,s=null,c=null;for(;null!==r;){if((null==r?void 0:r.point.lon)===t.lon&&r.point.lat===t.lat){var l;const t=null===(l=r.docIDs)||void 0===l?void 0:l.indexOf(n);var i;if(void 0!==t&&t>-1)return null===(i=r.docIDs)||void 0===i||i.splice(t,1),void(null!=r.docIDs&&0!==r.docIDs.length||(null!=s?"left"===c?s.left=null!==r.left?r.left:r.right:"right"===c&&(s.right=null!==r.right?r.right:r.left):e.root=null!==r.left?r.left:r.right))}s=r,0==o%P?t.lon<r.point.lon?(r=null==r?void 0:r.left,c="left"):(r=null==r?void 0:r.right,c="right"):t.lat<r.point.lat?(r=null==r?void 0:r.left,c="left"):(r=null==r?void 0:r.right,c="right"),o++}}(h,o,a),!1}}async function Y(e,t,n,r,o,s,c,l,i){if(!(0,q.isArrayType)(s))return G(e,t,n,r,o,s,c,l,i);const a=(0,q.getInnerType)(s),u=o,f=u.length;for(let h=0;h<f;h++)await G(e,t,n,r,u[h],a,c,l,i);return!0}async function H(e,t,n,s){if(!(n in t.tokenOccurrences))return[];const{node:c,type:l}=t.indexes[n];if("Radix"!==l)throw(0,r.$)("WRONG_SEARCH_PROPERTY_TYPE",n);const{exact:i,tolerance:a}=e.params,u=A(c,{term:s,exact:i,tolerance:a}),f=new Set;for(const r in u){if((0,o.g5)(u,r))for(const e of u[r])f.add(e)}return e.index.calculateResultScores(e,t,n,s,Array.from(f))}async function J(e,t,n){const s=Object.keys(n),c=s.reduce(((e,t)=>({[t]:[],...e})),{});for(const u of s){const s=n[u];if(void 0===t.indexes[u])throw(0,r.$)("UNKNOWN_FILTER_PROPERTY",u);const{node:f,type:p,isArray:v}=t.indexes[u];if("Bool"===p){const e=f[s.toString()];(0,o.h)(c[u],e);continue}if("BKD"===p){let e;if("radius"in s)e="radius";else{if(!("polygon"in s))throw new Error(`Invalid operation ${s}`);e="polygon"}if("radius"===e){const{value:t,coordinates:n,unit:r="m",inside:l=!0,highPrecision:i=!1}=s[e],a=(0,o.O6)(t,r),h=S(f.root,n,a,l,void 0,i);(0,o.h)(c[u],h.map((({docIDs:e})=>e)).flat())}else{const{coordinates:t,inside:n=!0,highPrecision:r=!1}=s[e],l=M(f.root,t,n,void 0,r);(0,o.h)(c[u],l.map((({docIDs:e})=>e)).flat())}continue}if("Radix"===p&&("string"==typeof s||Array.isArray(s))){for(const t of[s].flat()){const n=await e.tokenizer.tokenize(t,e.language,u);for(const e of n){const t=A(f,{term:e,exact:!0});(0,o.h)(c[u],Object.values(t).flat())}}continue}const y=Object.keys(s);if(y.length>1)throw(0,r.$)("INVALID_FILTER_OPERATION",y.length);if("Flat"!==p){if("AVL"===p){const e=y[0],t=s[e];let n=[];switch(e){case"gt":n=i(f,t,!1);break;case"gte":n=i(f,t,!0);break;case"lt":n=a(f,t,!1);break;case"lte":n=a(f,t,!0);break;case"eq":n=h(f,t)??[];break;case"between":{const[e,r]=t;n=l(f,e,r);break}}(0,o.h)(c[u],n)}}else v?(0,o.h)(c[u],g(f,s)):(0,o.h)(c[u],d(f,s))}return(0,o.y$)(Object.values(c))}async function U(e){return e.searchableProperties}async function X(e){return e.searchablePropertiesWithTypes}function Q(e){const t=w(e.e,e.s,e.k);t.d=e.d,t.w=e.w;for(const n of Object.keys(e.c))t.c[n]=Q(e.c[n]);return t}function Z(e){return{numberToDocumentId:new Map(e)}}function ee(e){return Array.from(e.numberToDocumentId.entries())}async function te(e,t){const{indexes:n,vectorIndexes:r,searchableProperties:o,searchablePropertiesWithTypes:s,frequencies:c,tokenOccurrences:l,avgFieldLength:i,fieldLengths:a}=t,u={},f={};for(const h of Object.keys(n)){const{node:e,type:t,isArray:r}=n[h];switch(t){case"Radix":u[h]={type:"Radix",node:Q(e),isArray:r};break;case"Flat":u[h]={type:"Flat",node:Z(e),isArray:r};break;default:u[h]=n[h]}}for(const h of Object.keys(r)){const e=r[h].vectors;for(const t in e)e[t]=[e[t][0],new Float32Array(e[t][1])];f[h]={size:r[h].size,vectors:e}}return{sharedInternalDocumentStore:e,indexes:u,vectorIndexes:f,searchableProperties:o,searchablePropertiesWithTypes:s,frequencies:c,tokenOccurrences:l,avgFieldLength:i,fieldLengths:a}}async function ne(e){const{indexes:t,vectorIndexes:n,searchableProperties:r,searchablePropertiesWithTypes:o,frequencies:s,tokenOccurrences:c,avgFieldLength:l,fieldLengths:i}=e,a={};for(const f of Object.keys(n)){const e=n[f].vectors;for(const t in e)e[t]=[e[t][0],Array.from(e[t][1])];a[f]={size:n[f].size,vectors:e}}const u={};for(const f of Object.keys(t)){const{type:e,node:n,isArray:r}=t[f];"Flat"===e?u[f]={type:"Flat",node:ee(n),isArray:r}:u[f]=t[f]}return{indexes:u,vectorIndexes:a,searchableProperties:r,searchablePropertiesWithTypes:o,frequencies:s,tokenOccurrences:c,avgFieldLength:l,fieldLengths:i}}async function re(){return{create:_,insert:N,remove:Y,insertDocumentScoreParameters:W,insertTokenScoreParameters:E,removeDocumentScoreParameters:z,removeTokenScoreParameters:K,calculateResultScores:V,search:H,searchByWhereClause:J,getSearchableProperties:U,getSearchablePropertiesWithTypes:X,load:te,save:ne}}},8654:(e,t,n)=>{function r(e,t,n){if(e===t)return 0;const r=e;e.length>t.length&&(e=t,t=r);let o=e.length,s=t.length,c=0;for(;c<o&&e.charCodeAt(c)===t.charCodeAt(c);)c++;if(c===o)return 0;for(;o>0&&e.charCodeAt(~-o)===t.charCodeAt(~-s);)o--,s--;if(!o)return s>n?-1:s;if(o-=c,s-=c,o<=n&&s<=n)return o>s?o:s;const l=s-o;if(n>s)n=s;else if(l>n)return-1;let i=0;const a=[],u=[];for(;i<n;)u[i]=t.charCodeAt(c+i),a[i]=++i;for(;i<s;)u[i]=t.charCodeAt(c+i),a[i++]=n+1;const f=n-l,h=n<s;let d=0,g=n,p=0,v=0,y=0,m=0,b=0;for(i=0;i<o;i++){for(v=i,p=i+1,m=e.charCodeAt(c+i),d+=i>f?1:0,g+=g<s?1:0,b=d;b<g;b++)y=p,p=v,v=a[b],m!==u[b]&&(v<p&&(p=v),y<p&&(p=y),p++),a[b]=p;if(h&&a[i+l]>n)return-1}return p<=n?p:-1}async function o(e,t,n){const o=r(e,t,n);return{distance:o,isBounded:o>=0}}function s(e,t,n){const o=r(e,t,n);return{distance:o,isBounded:o>=0}}n.d(t,{Gd:()=>s,X1:()=>o})}}]);